class DataValidator{static validatePrompt(data){const errors = [];if (!data.id || typeof data.id !== 'string'){errors.push('id는 필수 문자열입니다.')}if (!data.title || typeof data.title !== 'string'){errors.push('title은 필수 문자열입니다.')}else if (data.title.length < 1 || data.title.length > 100){errors.push('title은 1-100자 사이여야 합니다.')}if (!data.category || typeof data.category !== 'string'){errors.push('category는 필수 문자열입니다.')}if (!data.currentVersion || typeof data.currentVersion !== 'string'){errors.push('currentVersion은 필수 문자열입니다.')}if (data.description && data.description.length > 500){errors.push('description은 최대 500자까지 가능합니다.')}if (data.tags){if (!Array.isArray(data.tags)){errors.push('tags는 배열이어야 합니다.')}else if (data.tags.length > 10){errors.push('tags는 최대 10개까지 가능합니다.')}}if (!data.createdAt || !(data.createdAt instanceof Date)){errors.push('createdAt은 필수 Date 객체입니다.')}if (!data.updatedAt || !(data.updatedAt instanceof Date)){errors.push('updatedAt은 필수 Date 객체입니다.')}return{valid: errors.length === 0, errors: errors}}static validateVersion(data){const errors = [];if (!data.id || typeof data.id !== 'string'){errors.push('id는 필수 문자열입니다.')}if (!data.version || typeof data.version !== 'string'){errors.push('version은 필수 문자열입니다.')}else if (!/^v\d+\.\d+\.\d+$/.test(data.version)){errors.push('version은 v1.0.0 형식이어야 합니다.')}if (!data.content || typeof data.content !== 'string'){errors.push('content는 필수 문자열입니다.')}else if (data.content.length < 1 || data.content.length > 10000){errors.push('content는 1-10000자 사이여야 합니다.')}if (!data.changelog || typeof data.changelog !== 'string'){errors.push('changelog는 필수 문자열입니다.')}if (!data.createdBy || typeof data.createdBy !== 'string'){errors.push('createdBy는 필수 문자열입니다.')}if (!data.createdAt || !(data.createdAt instanceof Date)){errors.push('createdAt은 필수 Date 객체입니다.')}if (data.variables){if (!Array.isArray(data.variables)){errors.push('variables는 배열이어야 합니다.')}else{data.variables.forEach((variable, index) =>{const varErrors = this.validateVariable(variable);if (!varErrors.valid){errors.push(`variables[${index}]: ${varErrors.errors.join(', ')}`)}})}}return{valid: errors.length === 0, errors: errors}}static validateVariable(data){const errors = [];if (!data.name || typeof data.name !== 'string'){errors.push('name은 필수 문자열입니다.')}else if (!/^[a-zA-Z0-9_]+$/.test(data.name)){errors.push('name은 영문, 숫자, 언더스코어만 가능합니다.')}if (!data.type || !['string', 'number', 'boolean', 'enum'].includes(data.type)){errors.push('type은 string, number, boolean, enum 중 하나여야 합니다.')}if (data.type === 'enum' && (!data.options || !Array.isArray(data.options))){errors.push('enum 타입은 options 배열이 필요합니다.')}return{valid: errors.length === 0, errors: errors}}static validateExecution(data){const errors = [];if (!data.id || typeof data.id !== 'string'){errors.push('id는 필수 문자열입니다.')}if (!data.promptId || typeof data.promptId !== 'string'){errors.push('promptId는 필수 문자열입니다.')}if (!data.versionId || typeof data.versionId !== 'string'){errors.push('versionId는 필수 문자열입니다.')}if (!data.llmModel || typeof data.llmModel !== 'string'){errors.push('llmModel은 필수 문자열입니다.')}if (!data.executionMode || !['manual', 'auto'].includes(data.executionMode)){errors.push('executionMode는 manual 또는 auto여야 합니다.')}if (!data.executedAt || !(data.executedAt instanceof Date)){errors.push('executedAt은 필수 Date 객체입니다.')}if (data.rating !== null && data.rating !== undefined){if (typeof data.rating !== 'number' || data.rating < 1 || data.rating > 5){errors.push('rating은 1-5 사이의 숫자여야 합니다.')}}return{valid: errors.length === 0, errors: errors}}}class DataFactory{static createPrompt(data){return{id: data.id, title: data.title, description: data.description || '', category: data.category, tags: data.tags || [], currentVersion: data.currentVersion || 'v1.0.0', isPublic: data.isPublic || false, isDeleted: false, createdAt: new Date(), updatedAt: new Date()}}static createVersion(data){return{id: data.id, version: data.version, content: data.content, variables: data.variables || [], changelog: data.changelog, createdBy: data.createdBy, createdAt: new Date()}}static createExecution(data){return{id: data.id, promptId: data.promptId, versionId: data.versionId, input: data.input, output: data.output, llmModel: data.llmModel, executionMode: data.executionMode || 'manual', rating: null, feedback: null, tags: [], executedAt: new Date(), evaluatedAt: null}}}if (typeof module !== 'undefined' && module.exports){module.exports ={DataValidator, DataFactory}}