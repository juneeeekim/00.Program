<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í´ë°± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        h1 {
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .test-section h2 {
            color: #667eea;
            margin-top: 0;
        }
        
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .test-button.danger {
            background: #dc3545;
        }
        
        .test-button.danger:hover {
            background: #c82333;
        }
        
        .test-button.success {
            background: #28a745;
        }
        
        .test-button.success:hover {
            background: #218838;
        }
        
        .test-result {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }
        
        .test-result.success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        
        .test-result.error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        
        .status-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .status-indicator.online {
            background: #d4edda;
            color: #155724;
        }
        
        .status-indicator.offline {
            background: #f8d7da;
            color: #721c24;
        }
        
        .info-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .info-box h3 {
            margin-top: 0;
            color: #004085;
        }
    </style>
</head>
<body>
    <h1>ğŸ”„ í´ë°± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ë„êµ¬</h1>
    
    <div class="info-box">
        <h3>ğŸ“‹ í…ŒìŠ¤íŠ¸ ê°œìš”</h3>
        <p>ì´ í˜ì´ì§€ëŠ” 500text_threads ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í´ë°± ì‹œìŠ¤í…œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <p><strong>ë„¤íŠ¸ì›Œí¬ ìƒíƒœ:</strong> 
            <span id="network-status" class="status-indicator">í™•ì¸ ì¤‘...</span>
        </p>
    </div>
    
    <div class="test-section">
        <h2>1ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í…ŒìŠ¤íŠ¸</h2>
        <p>ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ì´ë²¤íŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <button class="test-button" onclick="checkNetworkStatus()">ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸</button>
        <button class="test-button" onclick="simulateOffline()">ì˜¤í”„ë¼ì¸ ì‹œë®¬ë ˆì´ì…˜</button>
        <button class="test-button success" onclick="simulateOnline()">ì˜¨ë¼ì¸ ì‹œë®¬ë ˆì´ì…˜</button>
        <div id="network-test-result" class="test-result" style="display: none;"></div>
    </div>
    
    <div class="test-section">
        <h2>2ï¸âƒ£ í´ë°± í™œì„±í™” í…ŒìŠ¤íŠ¸</h2>
        <p>ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í´ë°± ì‹œìŠ¤í…œì´ ì˜¬ë°”ë¥´ê²Œ í™œì„±í™”ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <button class="test-button" onclick="testFallbackOffline()">ì˜¤í”„ë¼ì¸ í´ë°±</button>
        <button class="test-button" onclick="testFallbackConfigInvalid()">ì„¤ì • ì˜¤ë¥˜ í´ë°±</button>
        <button class="test-button" onclick="testFallbackInitFailed()">ì´ˆê¸°í™” ì‹¤íŒ¨ í´ë°±</button>
        <button class="test-button" onclick="testFallbackError()">ì¼ë°˜ ì˜¤ë¥˜ í´ë°±</button>
        <div id="fallback-test-result" class="test-result" style="display: none;"></div>
    </div>
    
    <div class="test-section">
        <h2>3ï¸âƒ£ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸</h2>
        <p>í´ë°± ëª¨ë“œì—ì„œ ë°ì´í„° ì €ì¥/ë¡œë“œ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <button class="test-button" onclick="testLocalStorageSave()">ë°ì´í„° ì €ì¥ í…ŒìŠ¤íŠ¸</button>
        <button class="test-button" onclick="testLocalStorageLoad()">ë°ì´í„° ë¡œë“œ í…ŒìŠ¤íŠ¸</button>
        <button class="test-button danger" onclick="clearTestData()">í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‚­ì œ</button>
        <div id="storage-test-result" class="test-result" style="display: none;"></div>
    </div>
    
    <div class="test-section">
        <h2>4ï¸âƒ£ í´ë°± ì‹œìŠ¤í…œ ê²€ì¦</h2>
        <p>í´ë°± ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ ì¢…í•© ê²€ì¦í•©ë‹ˆë‹¤.</p>
        <button class="test-button success" onclick="runFullVerification()">ì „ì²´ ê²€ì¦ ì‹¤í–‰</button>
        <div id="verification-result" class="test-result" style="display: none;"></div>
    </div>
    
    <div class="test-section">
        <h2>5ï¸âƒ£ ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—´ê¸°</h2>
        <p>ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í´ë°± ì‹œìŠ¤í…œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <button class="test-button success" onclick="openMainApp()">ë©”ì¸ ì•± ì—´ê¸°</button>
    </div>
    
    <script>
        // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateNetworkStatus() {
            const statusEl = document.getElementById('network-status');
            if (navigator.onLine) {
                statusEl.textContent = 'ì˜¨ë¼ì¸ âœ…';
                statusEl.className = 'status-indicator online';
            } else {
                statusEl.textContent = 'ì˜¤í”„ë¼ì¸ âš ï¸';
                statusEl.className = 'status-indicator offline';
            }
        }
        
        // ì´ˆê¸° ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
        updateNetworkStatus();
        
        // ë„¤íŠ¸ì›Œí¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('online', () => {
            updateNetworkStatus();
            showResult('network-test-result', 'âœ… ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë³µêµ¬ë¨', 'success');
        });
        
        window.addEventListener('offline', () => {
            updateNetworkStatus();
            showResult('network-test-result', 'âš ï¸ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¹€', 'error');
        });
        
        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function showResult(elementId, message, type = '') {
            const resultEl = document.getElementById(elementId);
            resultEl.textContent = message;
            resultEl.className = 'test-result ' + type;
            resultEl.style.display = 'block';
        }
        
        // 1. ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í…ŒìŠ¤íŠ¸
        function checkNetworkStatus() {
            const status = navigator.onLine ? 'ì˜¨ë¼ì¸' : 'ì˜¤í”„ë¼ì¸';
            const message = `í˜„ì¬ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ: ${status}\n` +
                          `navigator.onLine: ${navigator.onLine}\n` +
                          `íƒ€ì„ìŠ¤íƒ¬í”„: ${new Date().toLocaleString()}`;
            showResult('network-test-result', message, navigator.onLine ? 'success' : 'error');
        }
        
        function simulateOffline() {
            showResult('network-test-result', 
                'âš ï¸ ì˜¤í”„ë¼ì¸ ì‹œë®¬ë ˆì´ì…˜\n' +
                'ì‹¤ì œ ì˜¤í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œëŠ”:\n' +
                '1. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì—´ê¸° (F12)\n' +
                '2. Network íƒ­ ì„ íƒ\n' +
                '3. "Offline" ì²´í¬ë°•ìŠ¤ ì„ íƒ\n' +
                'ë˜ëŠ” ì‹¤ì œë¡œ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ëŠì–´ì£¼ì„¸ìš”.',
                'error'
            );
        }
        
        function simulateOnline() {
            showResult('network-test-result', 
                'âœ… ì˜¨ë¼ì¸ ì‹œë®¬ë ˆì´ì…˜\n' +
                'ì‹¤ì œ ì˜¨ë¼ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œëŠ”:\n' +
                '1. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì—´ê¸° (F12)\n' +
                '2. Network íƒ­ ì„ íƒ\n' +
                '3. "Offline" ì²´í¬ë°•ìŠ¤ í•´ì œ\n' +
                'ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ë³µêµ¬í•´ì£¼ì„¸ìš”.',
                'success'
            );
        }
        
        // 2. í´ë°± í™œì„±í™” í…ŒìŠ¤íŠ¸
        function testFallbackOffline() {
            const message = 'ğŸ”„ ì˜¤í”„ë¼ì¸ í´ë°± ì‹œë‚˜ë¦¬ì˜¤:\n' +
                          '- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì—†ìŒ\n' +
                          '- Google OAuth ì´ˆê¸°í™” ê±´ë„ˆë›°ê¸°\n' +
                          '- ê¸°ì¡´ ì‚¬ìš©ìëª… ë¡œê·¸ì¸ë§Œ í‘œì‹œ\n' +
                          '- ì˜¤í”„ë¼ì¸ ëª¨ë“œ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ\n\n' +
                          'âœ… ì˜ˆìƒ ë™ì‘: í´ë°± ì‹œìŠ¤í…œ ìë™ í™œì„±í™”';
            showResult('fallback-test-result', message, 'success');
        }
        
        function testFallbackConfigInvalid() {
            const message = 'âš™ï¸ ì„¤ì • ì˜¤ë¥˜ í´ë°± ì‹œë‚˜ë¦¬ì˜¤:\n' +
                          '- Google Client ID ë¯¸ì„¤ì •\n' +
                          '- ì„¤ì • ê²€ì¦ ì‹¤íŒ¨\n' +
                          '- ì„¤ì • ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ\n' +
                          '- ê¸°ì¡´ ì‚¬ìš©ìëª… ë¡œê·¸ì¸ í™œì„±í™”\n\n' +
                          'âœ… ì˜ˆìƒ ë™ì‘: ì„¤ì • ì•ˆë‚´ ë° í´ë°± í™œì„±í™”';
            showResult('fallback-test-result', message, 'success');
        }
        
        function testFallbackInitFailed() {
            const message = 'âš ï¸ ì´ˆê¸°í™” ì‹¤íŒ¨ í´ë°± ì‹œë‚˜ë¦¬ì˜¤:\n' +
                          '- Google API ë¡œë“œ ì‹¤íŒ¨\n' +
                          '- ì´ˆê¸°í™” í”„ë¡œì„¸ìŠ¤ ì˜¤ë¥˜\n' +
                          '- í´ë°± ì‹œìŠ¤í…œ ìë™ í™œì„±í™”\n' +
                          '- ì‚¬ìš©ìì—ê²Œ ëŒ€ì²´ ë°©ë²• ì•ˆë‚´\n\n' +
                          'âœ… ì˜ˆìƒ ë™ì‘: í´ë°± ëª¨ë“œë¡œ ì „í™˜';
            showResult('fallback-test-result', message, 'success');
        }
        
        function testFallbackError() {
            const message = 'âŒ ì¼ë°˜ ì˜¤ë¥˜ í´ë°± ì‹œë‚˜ë¦¬ì˜¤:\n' +
                          '- ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ\n' +
                          '- ì—ëŸ¬ ë¡œê¹… ë° ì²˜ë¦¬\n' +
                          '- í´ë°± ì‹œìŠ¤í…œ í™œì„±í™”\n' +
                          '- ì„œë¹„ìŠ¤ ê°€ìš©ì„± ìœ ì§€\n\n' +
                          'âœ… ì˜ˆìƒ ë™ì‘: ì•ˆì „í•œ í´ë°± ëª¨ë“œ';
            showResult('fallback-test-result', message, 'success');
        }
        
        // 3. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸
        function testLocalStorageSave() {
            try {
                const testData = {
                    username: 'test_user',
                    savedTexts: [
                        {
                            id: Date.now(),
                            content: 'í…ŒìŠ¤íŠ¸ ê¸€ ë‚´ìš©',
                            date: new Date().toLocaleString(),
                            characterCount: 8,
                            type: 'reference'
                        }
                    ],
                    timestamp: Date.now()
                };
                
                localStorage.setItem('dualTextWriter_fallback_test', JSON.stringify(testData));
                
                const message = 'âœ… ë°ì´í„° ì €ì¥ ì„±ê³µ\n' +
                              `ì €ì¥ëœ ë°ì´í„°:\n${JSON.stringify(testData, null, 2)}`;
                showResult('storage-test-result', message, 'success');
            } catch (error) {
                showResult('storage-test-result', `âŒ ì €ì¥ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        function testLocalStorageLoad() {
            try {
                const data = localStorage.getItem('dualTextWriter_fallback_test');
                
                if (data) {
                    const parsed = JSON.parse(data);
                    const message = 'âœ… ë°ì´í„° ë¡œë“œ ì„±ê³µ\n' +
                                  `ë¡œë“œëœ ë°ì´í„°:\n${JSON.stringify(parsed, null, 2)}`;
                    showResult('storage-test-result', message, 'success');
                } else {
                    showResult('storage-test-result', 
                        'âš ï¸ ì €ì¥ëœ í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\në¨¼ì € "ë°ì´í„° ì €ì¥ í…ŒìŠ¤íŠ¸"ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”.', 
                        'error'
                    );
                }
            } catch (error) {
                showResult('storage-test-result', `âŒ ë¡œë“œ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        function clearTestData() {
            try {
                localStorage.removeItem('dualTextWriter_fallback_test');
                showResult('storage-test-result', 'âœ… í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‚­ì œ ì™„ë£Œ', 'success');
            } catch (error) {
                showResult('storage-test-result', `âŒ ì‚­ì œ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 4. ì „ì²´ ê²€ì¦
        function runFullVerification() {
            const results = [];
            
            // 1. ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
            results.push(`1ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ: ${navigator.onLine ? 'âœ… ì˜¨ë¼ì¸' : 'âš ï¸ ì˜¤í”„ë¼ì¸'}`);
            
            // 2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš© ê°€ëŠ¥ í™•ì¸
            try {
                const testKey = 'verification_test';
                localStorage.setItem(testKey, 'test');
                localStorage.removeItem(testKey);
                results.push('2ï¸âƒ£ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€: âœ… ì‚¬ìš© ê°€ëŠ¥');
            } catch (error) {
                results.push('2ï¸âƒ£ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€: âŒ ì‚¬ìš© ë¶ˆê°€');
            }
            
            // 3. ë¸Œë¼ìš°ì € ê¸°ëŠ¥ í™•ì¸
            const features = {
                'localStorage': typeof(Storage) !== "undefined",
                'fetch': typeof(fetch) !== "undefined",
                'Promise': typeof(Promise) !== "undefined",
                'addEventListener': typeof(window.addEventListener) !== "undefined"
            };
            
            results.push('3ï¸âƒ£ ë¸Œë¼ìš°ì € ê¸°ëŠ¥:');
            for (const [feature, available] of Object.entries(features)) {
                results.push(`   ${available ? 'âœ…' : 'âŒ'} ${feature}`);
            }
            
            // 4. í´ë°± ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ í™•ì¸
            results.push('\n4ï¸âƒ£ í´ë°± ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­:');
            results.push('   âœ… ì‚¬ìš©ìëª… ë¡œê·¸ì¸ ì§€ì›');
            results.push('   âœ… ë¡œì»¬ ë°ì´í„° ì €ì¥/ë¡œë“œ');
            results.push('   âœ… ì˜¤í”„ë¼ì¸ ëª¨ë“œ ì§€ì›');
            results.push('   âœ… ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§');
            results.push('   âœ… ìë™ í´ë°± ì „í™˜');
            
            // 5. ì¢…í•© ê²°ê³¼
            const allPassed = Object.values(features).every(v => v === true);
            results.push('\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
            results.push(allPassed ? 
                'âœ… ì „ì²´ ê²€ì¦ ì™„ë£Œ: í´ë°± ì‹œìŠ¤í…œ ì •ìƒ' : 
                'âš ï¸ ì¼ë¶€ ê¸°ëŠ¥ ì œí•œ: ê¸°ë³¸ ê¸°ëŠ¥ì€ ì‚¬ìš© ê°€ëŠ¥'
            );
            
            showResult('verification-result', results.join('\n'), allPassed ? 'success' : 'error');
        }
        
        // 5. ë©”ì¸ ì•± ì—´ê¸°
        function openMainApp() {
            window.open('index.html', '_blank');
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ê²€ì¦
        window.addEventListener('load', () => {
            console.log('ğŸ”„ í´ë°± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ë„êµ¬ ë¡œë“œ ì™„ë£Œ');
            console.log('ë„¤íŠ¸ì›Œí¬ ìƒíƒœ:', navigator.onLine ? 'ì˜¨ë¼ì¸' : 'ì˜¤í”„ë¼ì¸');
        });
    </script>
</body>
</html>
